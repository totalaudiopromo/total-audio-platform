# Total Audio Promo - Technical Architecture

## ðŸš€ Development Stack (2025)

### Primary Development Environment
- **Claude Code** - Primary IDE for complex development and architectural decisions
- **Cursor AI** - Targeted fixes, specific component work, refactoring
- **V0** - Rapid UI prototyping and design generation
- **CodeRabbit** - Automated code reviews and quality assurance
- **Devon** - Advanced AI development assistance

### Frontend Architecture

#### Core Framework
- **Next.js 14+** with App Router
- **TypeScript** for type safety and developer experience
- **React 18+** with Suspense and Server Components

#### Styling & UI
- **Tailwind CSS** - Utility-first styling
- **shadcn/ui** - High-quality component library
- **Framer Motion** - Professional animations and transitions
- **Custom Audio Brand System** - Tool-specific color activation

#### State Management
- **Zustand** - Lightweight, scalable state management
- **TanStack Query** - Server state management and caching
- **React Hook Form** - Form handling with validation

### Backend Architecture

#### API & Server
- **Next.js API Routes** - Serverless backend functions
- **tRPC** - End-to-end typesafe APIs
- **Zod** - Schema validation and type inference

#### Database & Storage
- **PostgreSQL** - Primary database (Supabase or Neon)
- **Prisma ORM** - Type-safe database access
- **Redis** - Caching and session management
- **AWS S3 / Cloudflare R2** - File storage for audio/images

#### Authentication & Security
- **NextAuth.js** - Authentication provider
- **JWT Tokens** - Session management
- **RBAC** - Role-based access control
- **Rate Limiting** - API protection

### AI & Intelligence Layer

#### Core AI Services
- **OpenAI GPT-4** - Content generation, analysis
- **Claude Sonnet** - Complex reasoning, code generation
- **Perplexity API** - Real-time web intelligence
- **Custom Audio Analysis** - Music intelligence processing

#### Music Platform Integrations
- **Spotify Web API** - Streaming data, playlist intelligence
- **Apple Music API** - Artist analytics, playlist data
- **SoundCloud API** - Independent artist data
- **TikTok API** - Trend analysis, sound tracking
- **YouTube Data API** - Video performance, music discovery

#### Social Media APIs
- **Instagram Basic Display** - Profile analytics, content performance
- **Twitter API v2** - Real-time trend monitoring
- **TikTok Commercial API** - Sound trend analysis
- **Facebook Graph API** - Cross-platform social insights

### Data & CRM Integration

#### Contact Management
- **Airtable API** - Contact database management
- **Monday.com API** - Project and campaign tracking
- **Google Sheets API** - Simple data import/export
- **Custom Enrichment Engine** - Contact intelligence processing

#### Email & Communication
- **SendGrid** - Transactional emails
- **Mailchimp** - Marketing campaigns
- **Resend** - Developer-friendly email service
- **Twilio** - SMS notifications (optional)

### Infrastructure & DevOps

#### Hosting & Deployment
- **Vercel** - Frontend hosting with global CDN
- **Railway** - Backend services and databases
- **Cloudflare** - CDN, security, and DNS management
- **GitHub Actions** - CI/CD pipeline

#### Monitoring & Analytics
- **Sentry** - Error tracking and performance monitoring
- **PostHog** - Product analytics and feature flags
- **LogRocket** - Session replay and debugging
- **Uptime Robot** - Service monitoring

### Component Architecture

#### Audio Brand System
```typescript
// Brand Color System
const toolColors = {
  intel: {
    primary: '#1E88E5',    // Electric Blue
    hover: '#1976D2',
    light: '#E3F2FD'
  },
  pulse: {
    primary: '#43A047',    // Neon Green
    hover: '#388E3C',
    light: '#E8F5E8'
  },
  radar: {
    primary: '#FF9800',    // Orange/Amber
    hover: '#F57C00',
    light: '#FFF3E0'
  },
  track: {
    primary: '#9C27B0',    // Purple/Magenta
    hover: '#7B1FA2',
    light: '#F3E5F5'
  },
  clone: {
    primary: '#E91E63',    // Hot Pink
    hover: '#C2185B',
    light: '#FCE4EC'
  },
  predict: {
    primary: '#FFC107',    // Gold/Yellow
    hover: '#FFA000',
    light: '#FFFDE7'
  }
};

// Audio Character Component
interface AudioProps {
  tool: keyof typeof toolColors;
  state: 'idle' | 'working' | 'success' | 'celebration';
  size: 'sm' | 'md' | 'lg';
  className?: string;
}
```

#### Reusable Components
```typescript
// Shared UI Components
- AudioCharacter - Brand mascot with animations
- BrandButton - Tool-specific styled buttons
- BrandCard - Consistent card layouts
- ColorActivation - B&W to color transitions
- LoadingStates - Audio-themed loading animations
- SuccessAnimations - Celebration micro-interactions
- NavigationWrapper - Cross-tool navigation
- DashboardLayout - Consistent layout structure
```

### API Architecture

#### Core API Structure
```typescript
// tRPC Router Example
export const appRouter = router({
  // Audio Intel Routes
  contacts: {
    enrich: procedure
      .input(contactEnrichSchema)
      .mutation(({ input }) => enrichContact(input)),
    search: procedure
      .input(contactSearchSchema)
      .query(({ input }) => searchContacts(input)),
  },
  
  // Playlist Pulse Routes  
  playlists: {
    analyze: procedure
      .input(playlistAnalysisSchema)
      .mutation(({ input }) => analyzePlaylist(input)),
    generatePitch: procedure
      .input(pitchGenerationSchema)
      .mutation(({ input }) => generatePitch(input)),
  },
  
  // Cross-tool Analytics
  analytics: {
    userActivity: procedure.query(() => getUserActivity()),
    toolUsage: procedure.query(() => getToolUsageStats()),
  }
});
```

#### Rate Limiting Strategy
```typescript
// API Rate Limits by Tier
const rateLimits = {
  free: {
    'audio-intel': 10, // requests per day
    'playlist-pulse': 5,
  },
  pro: {
    'audio-intel': 100,
    'playlist-pulse': 50,
  },
  agency: {
    'audio-intel': 1000,
    'playlist-pulse': 500,
  }
};
```

### Database Schema

#### Core Tables
```sql
-- Users and Authentication
users (id, email, name, tier, created_at, updated_at)
accounts (provider, provider_account_id, user_id)
sessions (session_token, user_id, expires)

-- Tool Usage and Analytics
tool_usage (id, user_id, tool_name, action, metadata, created_at)
user_analytics (user_id, tool_stats, usage_patterns, updated_at)

-- Audio Intel Specific
contacts (id, user_id, email, enriched_data, created_at)
enrichment_history (id, contact_id, enrichment_type, data, created_at)

-- Playlist Pulse Specific
playlists (id, user_id, spotify_id, analysis_data, created_at)
pitch_generations (id, playlist_id, pitch_content, success_rate, created_at)

-- Cross-tool Integration
campaigns (id, user_id, name, tools_used, status, created_at)
campaign_results (id, campaign_id, metrics, roi_data, created_at)
```

### Security Implementation

#### Data Protection
- **Encryption at Rest** - Database and file storage encryption
- **Encryption in Transit** - HTTPS/TLS for all communications
- **API Security** - Rate limiting, input validation, CORS policies
- **User Data Privacy** - GDPR compliant data handling

#### Access Control
```typescript
// Role-Based Access Control
type UserTier = 'free' | 'pro' | 'agency' | 'enterprise';
type ToolAccess = 'read' | 'write' | 'admin';

interface UserPermissions {
  tier: UserTier;
  tools: Record<string, ToolAccess>;
  features: string[];
  limits: Record<string, number>;
}
```

### Performance Optimization

#### Frontend Performance
- **Code Splitting** - Lazy loading by tool/route
- **Image Optimization** - Next.js Image component with CDN
- **Bundle Analysis** - Webpack bundle analyzer integration
- **Caching Strategy** - Static assets and API response caching

#### Backend Performance
- **Database Indexing** - Query optimization for common patterns
- **Connection Pooling** - Efficient database connections
- **Background Jobs** - Queue system for heavy processing
- **CDN Integration** - Global content delivery

### Development Workflow

#### Local Development Setup
```bash
# Environment Setup
cp .env.example .env.local
npm install
npx prisma generate
npx prisma db push

# Development Server
npm run dev

# Database Management
npm run db:studio    # Prisma Studio
npm run db:migrate   # Run migrations
npm run db:seed     # Seed development data
```

#### Code Quality Standards
- **ESLint + Prettier** - Code formatting and linting
- **Husky + lint-staged** - Pre-commit hooks
- **TypeScript Strict Mode** - Full type safety
- **Jest + Testing Library** - Unit and integration tests

#### Deployment Pipeline
```yaml
# GitHub Actions Workflow
name: Deploy
on: [push to main]
steps:
  - Checkout code
  - Run tests
  - Build application  
  - Deploy to Vercel
  - Run post-deployment tests
  - Notify team of deployment status
```

### Tool-Specific Technical Requirements

#### Audio Intel
- **Contact Enrichment Engine** - Email validation, social profile discovery
- **Data Sources** - LinkedIn, Twitter, Instagram, industry databases
- **Export Formats** - CSV, Airtable, Monday.com integration

#### Playlist Pulse  
- **Spotify Integration** - Playlist analysis, curator identification
- **AI Pitch Generation** - GPT-4 powered personalized pitches
- **Success Tracking** - Response rate monitoring, optimization

#### Release Radar (Future)
- **Multi-platform Coordination** - Spotify, Apple Music, social media
- **Campaign Automation** - Scheduled posts, playlist submissions
- **Performance Prediction** - AI-powered success forecasting

### Scalability Considerations

#### Horizontal Scaling
- **Microservices Architecture** - Tool-specific service isolation
- **Queue System** - Background job processing (Bull/BullMQ)
- **Load Balancing** - Multiple server instances
- **Database Sharding** - User-based data partitioning (future)

#### Vertical Scaling
- **Resource Optimization** - Memory and CPU usage monitoring
- **Database Performance** - Query optimization, connection pooling
- **Caching Layers** - Redis for session and API response caching
- **CDN Utilization** - Global asset delivery

---

*This technical architecture supports rapid development while maintaining scalability, security, and performance across the Total Audio ecosystem.*